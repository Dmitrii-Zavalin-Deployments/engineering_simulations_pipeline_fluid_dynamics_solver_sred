{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Fluid Simulation Thresholds Schema",
  "type": "object",
  "required": [
    "divergence_tests",
    "velocity_tests",
    "projection_effectiveness",
    "volatility_tests",
    "residual_tests",
    "pressure_tests",
    "cfl_tests",
    "test_behavior",
    "damping_tests"
  ],
  "properties": {
    "divergence_tests": {
      "type": "object",
      "required": ["max_divergence_threshold", "spike_factor"],
      "properties": {
        "max_divergence_threshold": { "type": "number", "minimum": 0.0 },
        "spike_factor": { "type": "number", "minimum": 10.0 }
      },
      "additionalProperties": false
    },
    "velocity_tests": {
      "type": "object",
      "required": ["velocity_magnitude_max", "warning_tolerance_percent"],
      "properties": {
        "velocity_magnitude_max": { "type": "number", "minimum": 0.0 },
        "warning_tolerance_percent": { "type": "number", "minimum": 0.0, "maximum": 100.0 }
      },
      "additionalProperties": false
    },
    "projection_effectiveness": {
      "type": "object",
      "required": ["minimum_reduction_percent", "max_projection_passes"],
      "properties": {
        "minimum_reduction_percent": { "type": "number", "minimum": 0.0, "maximum": 100.0 },
        "max_projection_passes": { "type": "integer", "minimum": 1 }
      },
      "additionalProperties": false
    },
    "volatility_tests": {
      "type": "object",
      "required": ["warning_threshold", "max_slope_per_step", "delta_threshold"],
      "properties": {
        "warning_threshold": { "type": "number", "minimum": 0.0 },
        "max_slope_per_step": { "type": "number", "minimum": 0.0 },
        "delta_threshold": { "type": "number", "minimum": 0.0 }
      },
      "additionalProperties": false
    },
    "residual_tests": {
      "type": "object",
      "required": ["max_residual_allowed"],
      "properties": {
        "max_residual_allowed": { "type": "number", "minimum": 0.0 }
      },
      "additionalProperties": false
    },
    "pressure_tests": {
      "type": "object",
      "required": ["max_pressure_difference"],
      "properties": {
        "max_pressure_difference": { "type": "number", "minimum": 0.0 }
      },
      "additionalProperties": false
    },
    "cfl_tests": {
      "type": "object",
      "required": ["max_cfl_stable"],
      "properties": {
        "max_cfl_stable": { "type": "number", "minimum": 0.0, "maximum": 1.0 }
      },
      "additionalProperties": false
    },
    "test_behavior": {
      "type": "object",
      "required": ["enable_overflow_logging", "strict_mode"],
      "properties": {
        "enable_overflow_logging": { "type": "boolean" },
        "strict_mode": { "type": "boolean" }
      },
      "additionalProperties": false
    },
    "damping_tests": {
      "type": "object",
      "required": ["damping_enabled", "damping_factor", "max_consecutive_failures"],
      "properties": {
        "damping_enabled": { "type": "boolean" },
        "damping_factor": { "type": "number", "minimum": 0.0, "maximum": 1.0 },
        "max_consecutive_failures": { "type": "integer", "minimum": 0 }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}



